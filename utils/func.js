'use strict';
/*
|--------------------------------------------------------------------------
| 小工具函数
|--------------------------------------------------------------------------
|
*/

const _ = require('lodash')

/////////////////////////////////////////////////////////////////////////////////
//
//  根据环境重新过滤配置
//
/////////////////////////////////////////////////////////////////////////////////
function filterByEnv(conf, env) {
    for (let key in conf) {
        if (conf[key][env])
            conf[key] = conf[key][env];
    }

    return conf;
}

/////////////////////////////////////////////////////////////////////////////////
//
//  合并配置
//
/////////////////////////////////////////////////////////////////////////////////
function mergeAll(base, other) {
    return _.merge({}, base, other);
}

/////////////////////////////////////////////////////////////////////////////////
//
//  合并配置
//
/////////////////////////////////////////////////////////////////////////////////
function getEnv() {
    process.env.NODE_ENV = process.env.NODE_ENV || "production";
    return process.env.NODE_ENV;
}

const env = getEnv();

module.exports = {filterByEnv, mergeAll, getEnv, env };
